"use strict";(self.webpackChunkdrainerless=self.webpackChunkdrainerless||[]).push([[6656],{2066:(t,e,n)=>{var i,o=n(7528),a=n(2316),r=n(164),s=n(3188),l=(n(7410),n(4460)),c=n(5907);n(2171);const u=(0,a.AH)(i||(i=(0,o.A)(["\n  :host {\n    position: relative;\n    display: inline-block;\n  }\n\n  wui-text {\n    margin: var(--wui-spacing-xxs) var(--wui-spacing-m) var(--wui-spacing-0) var(--wui-spacing-m);\n  }\n"])));var d,p,h=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let w=class extends a.WF{constructor(){super(...arguments),this.disabled=!1}render(){return(0,a.qy)(d||(d=(0,o.A)(['\n      <wui-input-text\n        type="email"\n        placeholder="Email"\n        icon="mail"\n        size="mdl"\n        .disabled=',"\n        .value=",'\n        data-testid="wui-email-input"\n        tabIdx=',"\n      ></wui-input-text>\n      ","\n    "])),this.disabled,this.value,(0,s.J)(this.tabIdx),this.templateError())}templateError(){return this.errorMessage?(0,a.qy)(p||(p=(0,o.A)(['<wui-text variant="tiny-500" color="error-100">',"</wui-text>"])),this.errorMessage):null}};w.styles=[l.W5,u],h([(0,r.MZ)()],w.prototype,"errorMessage",void 0),h([(0,r.MZ)({type:Boolean})],w.prototype,"disabled",void 0),h([(0,r.MZ)()],w.prototype,"value",void 0),h([(0,r.MZ)()],w.prototype,"tabIdx",void 0),w=h([(0,c.E)("wui-email-input")],w)},2171:(t,e,n)=>{var i,o=n(7528),a=n(2316),r=n(164),s=n(2562),l=n(3188),c=n(1663),u=(n(2823),n(4460)),d=n(5907);const p=(0,a.AH)(i||(i=(0,o.A)(["\n  :host {\n    position: relative;\n    width: 100%;\n    display: inline-block;\n    color: var(--wui-color-fg-275);\n  }\n\n  input {\n    width: 100%;\n    border-radius: var(--wui-border-radius-xs);\n    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);\n    background: var(--wui-color-gray-glass-002);\n    font-size: var(--wui-font-size-paragraph);\n    letter-spacing: var(--wui-letter-spacing-paragraph);\n    color: var(--wui-color-fg-100);\n    transition:\n      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),\n      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md),\n      box-shadow var(--wui-ease-inout-power-1) var(--wui-duration-md);\n    will-change: background-color, border-color, box-shadow;\n    caret-color: var(--wui-color-accent-100);\n  }\n\n  input:disabled {\n    cursor: not-allowed;\n    border: 1px solid var(--wui-color-gray-glass-010);\n  }\n\n  input:disabled::placeholder,\n  input:disabled + wui-icon {\n    color: var(--wui-color-fg-300);\n  }\n\n  input::placeholder {\n    color: var(--wui-color-fg-275);\n  }\n\n  input:focus:enabled {\n    background-color: var(--wui-color-gray-glass-005);\n    -webkit-box-shadow:\n      inset 0 0 0 1px var(--wui-color-accent-100),\n      0px 0px 0px 4px var(--wui-box-shadow-blue);\n    -moz-box-shadow:\n      inset 0 0 0 1px var(--wui-color-accent-100),\n      0px 0px 0px 4px var(--wui-box-shadow-blue);\n    box-shadow:\n      inset 0 0 0 1px var(--wui-color-accent-100),\n      0px 0px 0px 4px var(--wui-box-shadow-blue);\n  }\n\n  input:hover:enabled {\n    background-color: var(--wui-color-gray-glass-005);\n  }\n\n  wui-icon {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    pointer-events: none;\n  }\n\n  .wui-size-sm {\n    padding: 9px var(--wui-spacing-m) 10px var(--wui-spacing-s);\n  }\n\n  wui-icon + .wui-size-sm {\n    padding: 9px var(--wui-spacing-m) 10px 36px;\n  }\n\n  wui-icon[data-input='sm'] {\n    left: var(--wui-spacing-s);\n  }\n\n  .wui-size-md {\n    padding: 15px var(--wui-spacing-m) var(--wui-spacing-l) var(--wui-spacing-m);\n  }\n\n  wui-icon + .wui-size-md,\n  wui-loading-spinner + .wui-size-md {\n    padding: 10.5px var(--wui-spacing-3xl) 10.5px var(--wui-spacing-3xl);\n  }\n\n  wui-icon[data-input='md'] {\n    left: var(--wui-spacing-l);\n  }\n\n  .wui-size-lg {\n    padding: var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-l);\n    letter-spacing: var(--wui-letter-spacing-medium-title);\n    font-size: var(--wui-font-size-medium-title);\n    font-weight: var(--wui-font-weight-light);\n    line-height: 130%;\n    color: var(--wui-color-fg-100);\n    height: 64px;\n  }\n\n  .wui-padding-right-xs {\n    padding-right: var(--wui-spacing-xs);\n  }\n\n  .wui-padding-right-s {\n    padding-right: var(--wui-spacing-s);\n  }\n\n  .wui-padding-right-m {\n    padding-right: var(--wui-spacing-m);\n  }\n\n  .wui-padding-right-l {\n    padding-right: var(--wui-spacing-l);\n  }\n\n  .wui-padding-right-xl {\n    padding-right: var(--wui-spacing-xl);\n  }\n\n  .wui-padding-right-2xl {\n    padding-right: var(--wui-spacing-2xl);\n  }\n\n  .wui-padding-right-3xl {\n    padding-right: var(--wui-spacing-3xl);\n  }\n\n  .wui-padding-right-4xl {\n    padding-right: var(--wui-spacing-4xl);\n  }\n\n  .wui-padding-right-5xl {\n    padding-right: var(--wui-spacing-5xl);\n  }\n\n  wui-icon + .wui-size-lg,\n  wui-loading-spinner + .wui-size-lg {\n    padding-left: 50px;\n  }\n\n  wui-icon[data-input='lg'] {\n    left: var(--wui-spacing-l);\n  }\n\n  .wui-size-mdl {\n    padding: 17.25px var(--wui-spacing-m) 17.25px var(--wui-spacing-m);\n  }\n  wui-icon + .wui-size-mdl,\n  wui-loading-spinner + .wui-size-mdl {\n    padding: 17.25px var(--wui-spacing-3xl) 17.25px 40px;\n  }\n  wui-icon[data-input='mdl'] {\n    left: var(--wui-spacing-m);\n  }\n\n  input:placeholder-shown ~ ::slotted(wui-input-element),\n  input:placeholder-shown ~ ::slotted(wui-icon) {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  ::slotted(wui-input-element),\n  ::slotted(wui-icon) {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  ::slotted(wui-input-element) {\n    right: var(--wui-spacing-m);\n  }\n\n  ::slotted(wui-icon) {\n    right: 0px;\n  }\n"])));var h,w,g=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let v=class extends a.WF{constructor(){super(...arguments),this.inputElementRef=(0,c._)(),this.size="md",this.disabled=!1,this.placeholder="",this.type="text",this.value=""}render(){const t="wui-padding-right-".concat(this.inputRightPadding),e="wui-size-".concat(this.size),n={[e]:!0,[t]:Boolean(this.inputRightPadding)};return(0,a.qy)(h||(h=(0,o.A)(["",'\n      <input\n        data-testid="wui-input-text"\n        ',"\n        class=","\n        type=","\n        enterkeyhint=","\n        ?disabled=","\n        placeholder=","\n        @input=","\n        .value=","\n        tabindex=","\n      />\n      <slot></slot>"])),this.templateIcon(),(0,c.K)(this.inputElementRef),(0,s.H)(n),this.type,(0,l.J)(this.enterKeyHint),this.disabled,this.placeholder,this.dispatchInputChangeEvent.bind(this),this.value||"",(0,l.J)(this.tabIdx))}templateIcon(){return this.icon?(0,a.qy)(w||(w=(0,o.A)(["<wui-icon\n        data-input=","\n        size=",'\n        color="inherit"\n        name=',"\n      ></wui-icon>"])),this.size,this.size,this.icon):null}dispatchInputChangeEvent(){var t;this.dispatchEvent(new CustomEvent("inputChange",{detail:null===(t=this.inputElementRef.value)||void 0===t?void 0:t.value,bubbles:!0,composed:!0}))}};v.styles=[u.W5,u.fD,p],g([(0,r.MZ)()],v.prototype,"size",void 0),g([(0,r.MZ)()],v.prototype,"icon",void 0),g([(0,r.MZ)({type:Boolean})],v.prototype,"disabled",void 0),g([(0,r.MZ)()],v.prototype,"placeholder",void 0),g([(0,r.MZ)()],v.prototype,"type",void 0),g([(0,r.MZ)()],v.prototype,"keyHint",void 0),g([(0,r.MZ)()],v.prototype,"value",void 0),g([(0,r.MZ)()],v.prototype,"inputRightPadding",void 0),g([(0,r.MZ)()],v.prototype,"tabIdx",void 0),v=g([(0,d.E)("wui-input-text")],v)},3830:(t,e,n)=>{var i,o=n(7528),a=n(2316),r=n(164),s=n(3188),l=(n(7410),n(4460)),c=n(5907);const u=(0,a.AH)(i||(i=(0,o.A)(["\n  button {\n    padding: var(--wui-spacing-4xs) var(--wui-spacing-xxs);\n    border-radius: var(--wui-border-radius-3xs);\n    background-color: transparent;\n    color: var(--wui-color-accent-100);\n  }\n\n  button:disabled {\n    background-color: transparent;\n    color: var(--wui-color-gray-glass-015);\n  }\n\n  button:hover {\n    background-color: var(--wui-color-gray-glass-005);\n  }\n"])));var d,p=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let h=class extends a.WF{constructor(){super(...arguments),this.tabIdx=void 0,this.disabled=!1,this.color="inherit"}render(){return(0,a.qy)(d||(d=(0,o.A)(["\n      <button ?disabled="," tabindex=",'>\n        <slot name="iconLeft"></slot>\n        <wui-text variant="small-600" color=','>\n          <slot></slot>\n        </wui-text>\n        <slot name="iconRight"></slot>\n      </button>\n    '])),this.disabled,(0,s.J)(this.tabIdx),this.color)}};h.styles=[l.W5,l.fD,u],p([(0,r.MZ)()],h.prototype,"tabIdx",void 0),p([(0,r.MZ)({type:Boolean})],h.prototype,"disabled",void 0),p([(0,r.MZ)()],h.prototype,"color",void 0),h=p([(0,c.E)("wui-link")],h)},4663:(t,e,n)=>{n(408)},4820:(t,e,n)=>{n(2469)},6656:(t,e,n)=>{n.r(e),n.d(e,{W3mEmailLoginView:()=>lt,W3mEmailVerifyDeviceView:()=>H,W3mEmailVerifyOtpView:()=>W,W3mUpdateEmailPrimaryOtpView:()=>et,W3mUpdateEmailSecondaryOtpView:()=>it,W3mUpdateEmailWalletView:()=>$});var i,o=n(257),a=n(7825),r=n(7532),s=n(7891),l=n(4315),c=n(3155),u=n(2606),d=n(7528),p=n(2316),h=n(164),w=n(1785),g=n(1302),v=n(1672),m=(n(9437),n(3830),n(4820),n(7568),n(4460)),f=n(2511),b=n(5907);const x=(0,p.AH)(i||(i=(0,d.A)(["\n  :host {\n    position: relative;\n    display: inline-block;\n  }\n\n  input {\n    width: 50px;\n    height: 50px;\n    background: var(--wui-color-gray-glass-010);\n    border-radius: var(--wui-border-radius-xs);\n    border: 1px solid var(--wui-color-gray-glass-005);\n    font-family: var(--wui-font-family);\n    font-size: var(--wui-font-size-large);\n    font-weight: var(--wui-font-weight-regular);\n    letter-spacing: var(--wui-letter-spacing-large);\n    text-align: center;\n    color: var(--wui-color-fg-100);\n    caret-color: var(--wui-color-accent-100);\n    transition:\n      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),\n      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md),\n      box-shadow var(--wui-ease-inout-power-1) var(--wui-duration-md);\n    will-change: background-color, border-color, box-shadow;\n    box-sizing: border-box;\n    -webkit-appearance: none;\n    -moz-appearance: textfield;\n    padding: 0px;\n  }\n\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  input:disabled {\n    cursor: not-allowed;\n    border: 1px solid var(--wui-color-gray-glass-010);\n    background: var(--wui-color-gray-glass-005);\n  }\n\n  input:focus:enabled {\n    background-color: var(--wui-color-gray-glass-015);\n    border: 1px solid var(--wui-color-accent-100);\n    -webkit-box-shadow: 0px 0px 0px 4px var(--wui-box-shadow-blue);\n    -moz-box-shadow: 0px 0px 0px 4px var(--wui-box-shadow-blue);\n    box-shadow: 0px 0px 0px 4px var(--wui-box-shadow-blue);\n  }\n\n  @media (hover: hover) and (pointer: fine) {\n    input:hover:enabled {\n      background-color: var(--wui-color-gray-glass-015);\n    }\n  }\n"])));var y,E=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let I=class extends p.WF{constructor(){super(...arguments),this.disabled=!1,this.value=""}render(){return(0,p.qy)(y||(y=(0,d.A)(['<input\n      type="number"\n      maxlength="1"\n      inputmode="numeric"\n      autofocus\n      ?disabled=',"\n      value=","\n    /> "])),this.disabled,this.value)}};var O;I.styles=[m.W5,m.fD,x],E([(0,h.MZ)({type:Boolean})],I.prototype,"disabled",void 0),E([(0,h.MZ)({type:String})],I.prototype,"value",void 0),I=E([(0,b.E)("wui-input-numeric")],I);const A=(0,p.AH)(O||(O=(0,d.A)(["\n  :host {\n    position: relative;\n    display: block;\n  }\n"])));var k,C,R=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let T=class extends p.WF{constructor(){super(...arguments),this.length=6,this.otp="",this.values=Array.from({length:this.length}).map((()=>"")),this.numerics=[],this.shouldInputBeEnabled=t=>this.values.slice(0,t).every((t=>""!==t)),this.handleKeyDown=(t,e)=>{const n=t.target,i=this.getInputElement(n);if(!i)return;["ArrowLeft","ArrowRight","Shift","Delete"].includes(t.key)&&t.preventDefault();const o=i.selectionStart;switch(t.key){case"ArrowLeft":o&&i.setSelectionRange(o+1,o+1),this.focusInputField("prev",e);break;case"ArrowRight":case"Shift":this.focusInputField("next",e);break;case"Delete":case"Backspace":""===i.value?this.focusInputField("prev",e):this.updateInput(i,e,"")}},this.focusInputField=(t,e)=>{if("next"===t){const t=e+1;if(!this.shouldInputBeEnabled(t))return;const n=this.numerics[t<this.length?t:e],i=n?this.getInputElement(n):void 0;i&&(i.disabled=!1,i.focus())}if("prev"===t){const t=e-1,n=this.numerics[t>-1?t:e],i=n?this.getInputElement(n):void 0;i&&i.focus()}}}firstUpdated(){var t,e;this.otp&&(this.values=this.otp.split(""));const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll("wui-input-numeric");n&&(this.numerics=Array.from(n)),null===(e=this.numerics[0])||void 0===e||e.focus()}render(){return(0,p.qy)(k||(k=(0,d.A)(['\n      <wui-flex gap="xxs" data-testid="wui-otp-input">\n        ',"\n      </wui-flex>\n    "])),Array.from({length:this.length}).map(((t,e)=>(0,p.qy)(C||(C=(0,d.A)(["\n            <wui-input-numeric\n              @input=","\n              @click=","\n              @keydown=","\n              .disabled=","\n              .value=","\n            >\n            </wui-input-numeric>\n          "])),(t=>this.handleInput(t,e)),(t=>this.selectInput(t)),(t=>this.handleKeyDown(t,e)),!this.shouldInputBeEnabled(e),this.values[e]||""))))}updateInput(t,e,n){const i=this.numerics[e],o=t||(i?this.getInputElement(i):void 0);o&&(o.value=n,this.values=this.values.map(((t,i)=>i===e?n:t)))}selectInput(t){const e=t.target;if(e){const t=this.getInputElement(e);null===t||void 0===t||t.select()}}handleInput(t,e){const n=t.target,i=this.getInputElement(n);if(i){const n=i.value;if("insertFromPaste"===t.inputType)this.handlePaste(i,n,e);else{f.Z.isNumber(n)&&t.data?(this.updateInput(i,e,t.data),this.focusInputField("next",e)):this.updateInput(i,e,"")}}this.dispatchInputChangeEvent()}handlePaste(t,e,n){const i=e[0];if(i&&f.Z.isNumber(i)){this.updateInput(t,n,i);const o=e.substring(1);if(n+1<this.length&&o.length){const t=this.numerics[n+1],e=t?this.getInputElement(t):void 0;e&&this.handlePaste(e,o,n+1)}else this.focusInputField("next",n)}else this.updateInput(t,n,"")}getInputElement(t){var e;return null!==(e=t.shadowRoot)&&void 0!==e&&e.querySelector("input")?t.shadowRoot.querySelector("input"):null}dispatchInputChangeEvent(){const t=this.values.join("");this.dispatchEvent(new CustomEvent("inputChange",{detail:t,bubbles:!0,composed:!0}))}};T.styles=[m.W5,A],R([(0,h.MZ)({type:Number})],T.prototype,"length",void 0),R([(0,h.MZ)({type:String})],T.prototype,"otp",void 0),R([(0,h.wk)()],T.prototype,"values",void 0),T=R([(0,b.E)("wui-otp")],T);n(8161);var P,D=n(1431);const S=(0,p.AH)(P||(P=(0,d.A)(["\n  wui-loading-spinner {\n    margin: 9px auto;\n  }\n\n  .email-display,\n  .email-display wui-text {\n    max-width: 100%;\n  }\n"])));var M,z,_,j,F=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let L=class extends p.WF{firstUpdated(){this.startOTPTimeout()}disconnectedCallback(){clearTimeout(this.OTPTimeout)}constructor(){var t;super(),this.loading=!1,this.timeoutTimeLeft=D.Q.getTimeToNextEmailLogin(),this.error="",this.otp="",this.email=null===(t=w.I.state.data)||void 0===t?void 0:t.email,this.authConnector=g.a.getAuthConnector()}render(){if(!this.email)throw new Error("w3m-email-otp-widget: No email provided");const t=Boolean(this.timeoutTimeLeft),e=this.getFooterLabels(t);return(0,p.qy)(M||(M=(0,d.A)(['\n      <wui-flex\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="l"\n      >\n        <wui-flex\n          class="email-display"\n          flexDirection="column"\n          alignItems="center"\n          .padding=','\n        >\n          <wui-text variant="paragraph-400" color="fg-100" align="center">\n            Enter the code we sent to\n          </wui-text>\n          <wui-text variant="paragraph-500" color="fg-100" lineClamp="1" align="center">\n            ','\n          </wui-text>\n        </wui-flex>\n\n        <wui-text variant="small-400" color="fg-200">The code expires in 20 minutes</wui-text>\n\n        ','\n\n        <wui-flex alignItems="center" gap="xs">\n          <wui-text variant="small-400" color="fg-200">',"</wui-text>\n          <wui-link @click="," .disabled=",">\n            ","\n          </wui-link>\n        </wui-flex>\n      </wui-flex>\n    "])),["l","0","l","0"],["0","xl","0","xl"],this.email,this.loading?(0,p.qy)(z||(z=(0,d.A)(['<wui-loading-spinner size="xl" color="accent-100"></wui-loading-spinner>']))):(0,p.qy)(_||(_=(0,d.A)([' <wui-flex flexDirection="column" alignItems="center" gap="xs">\n              <wui-otp\n                dissabled\n                length="6"\n                @inputChange=',"\n                .otp=","\n              ></wui-otp>\n              ","\n            </wui-flex>"])),this.onOtpInputChange.bind(this),this.otp,this.error?(0,p.qy)(j||(j=(0,d.A)(['\n                    <wui-text variant="small-400" align="center" color="error-100">\n                      ',". Try Again\n                    </wui-text>\n                  "])),this.error):null),e.title,this.onResendCode.bind(this),t,e.action)}startOTPTimeout(){this.timeoutTimeLeft=D.Q.getTimeToNextEmailLogin(),this.OTPTimeout=setInterval((()=>{this.timeoutTimeLeft>0?this.timeoutTimeLeft=D.Q.getTimeToNextEmailLogin():clearInterval(this.OTPTimeout)}),1e3)}async onOtpInputChange(t){try{var e;if(!this.loading)if(this.otp=t.detail,this.authConnector&&6===this.otp.length)this.loading=!0,await(null===(e=this.onOtpSubmit)||void 0===e?void 0:e.call(this,this.otp))}catch(n){this.error=c.w.parseError(n),this.loading=!1}}async onResendCode(){try{if(this.onOtpResend){if(!this.loading&&!this.timeoutTimeLeft){this.error="",this.otp="";if(!g.a.getAuthConnector()||!this.email)throw new Error("w3m-email-otp-widget: Unable to resend email");this.loading=!0,await this.onOtpResend(this.email),this.startOTPTimeout(),v.P.showSuccess("Code email resent")}}else this.onStartOver&&this.onStartOver()}catch(t){v.P.showError(t)}finally{this.loading=!1}}getFooterLabels(t){return this.onStartOver?{title:"Something wrong?",action:"Try again ".concat(t?"in ".concat(this.timeoutTimeLeft,"s"):"")}:{title:"Didn't receive it?",action:"Resend ".concat(t?"in ".concat(this.timeoutTimeLeft,"s"):"Code")}}};L.styles=S,F([(0,h.wk)()],L.prototype,"loading",void 0),F([(0,h.wk)()],L.prototype,"timeoutTimeLeft",void 0),F([(0,h.wk)()],L.prototype,"error",void 0),L=F([(0,u.EM)("w3m-email-otp-widget")],L);var V=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let W=class extends L{constructor(){super(...arguments),this.onOtpSubmit=async t=>{try{if(this.authConnector){if(await this.authConnector.provider.connectOtp({otp:t}),o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),!a.W.state.activeChain)throw new Error("Active chain is not set on ChainControll");await r.x.connectExternal(this.authConnector,a.W.state.activeChain),o.E.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"email",name:this.authConnector.name||"Unknown"}}),s.H.state.siwx||l.W.close()}}catch(e){throw o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:c.w.parseError(e)}}),e}},this.onOtpResend=async t=>{this.authConnector&&(await this.authConnector.provider.connectEmail({email:t}),o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}))}}};W=V([(0,u.EM)("w3m-email-verify-otp-view")],W);var N;n(4663);const Z=(0,p.AH)(N||(N=(0,d.A)(["\n  wui-icon-box {\n    height: var(--wui-icon-box-size-xl);\n    width: var(--wui-icon-box-size-xl);\n  }\n"])));var q,U=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let H=class extends p.WF{constructor(){var t;super(),this.email=null===(t=w.I.state.data)||void 0===t?void 0:t.email,this.authConnector=g.a.getAuthConnector(),this.loading=!1,this.listenForDeviceApproval()}render(){if(!this.email)throw new Error("w3m-email-verify-device-view: No email provided");if(!this.authConnector)throw new Error("w3m-email-verify-device-view: No auth connector provided");return(0,p.qy)(q||(q=(0,d.A)(['\n      <wui-flex\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="l"\n      >\n        <wui-icon-box\n          size="xl"\n          iconcolor="accent-100"\n          backgroundcolor="accent-100"\n          icon="verify"\n          background="opaque"\n        ></wui-icon-box>\n\n        <wui-flex flexDirection="column" alignItems="center" gap="s">\n          <wui-flex flexDirection="column" alignItems="center">\n            <wui-text variant="paragraph-400" color="fg-100">\n              Approve the login link we sent to\n            </wui-text>\n            <wui-text variant="paragraph-400" color="fg-100"><b>','</b></wui-text>\n          </wui-flex>\n\n          <wui-text variant="small-400" color="fg-200" align="center">\n            The code expires in 20 minutes\n          </wui-text>\n\n          <wui-flex alignItems="center" id="w3m-resend-section" gap="xs">\n            <wui-text variant="small-400" color="fg-100" align="center">\n              Didn\'t receive it?\n            </wui-text>\n            <wui-link @click='," .disabled=",">\n              Resend email\n            </wui-link>\n          </wui-flex>\n        </wui-flex>\n      </wui-flex>\n    "])),["xxl","s","xxl","s"],this.email,this.onResendCode.bind(this),this.loading)}async listenForDeviceApproval(){if(this.authConnector)try{await this.authConnector.provider.connectDevice(),o.E.sendEvent({type:"track",event:"DEVICE_REGISTERED_FOR_EMAIL"}),o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}),w.I.replace("EmailVerifyOtp",{email:this.email})}catch(t){w.I.goBack()}}async onResendCode(){try{if(!this.loading){if(!this.authConnector||!this.email)throw new Error("w3m-email-login-widget: Unable to resend email");this.loading=!0,await this.authConnector.provider.connectEmail({email:this.email}),this.listenForDeviceApproval(),v.P.showSuccess("Code email resent")}}catch(t){v.P.showError(t)}finally{this.loading=!1}}};H.styles=Z,U([(0,h.wk)()],H.prototype,"loading",void 0),H=U([(0,u.EM)("w3m-email-verify-device-view")],H);var B,K=n(1663);n(4722),n(2066);const Y=(0,p.AH)(B||(B=(0,d.A)(["\n  wui-email-input {\n    width: 100%;\n  }\n\n  form {\n    width: 100%;\n    display: block;\n    position: relative;\n  }\n"])));var J,Q,G,X=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let $=class extends p.WF{constructor(){var t,e,n;super(...arguments),this.formRef=(0,K._)(),this.initialEmail=null!==(t=null===(e=w.I.state.data)||void 0===e?void 0:e.email)&&void 0!==t?t:"",this.redirectView=null===(n=w.I.state.data)||void 0===n?void 0:n.redirectView,this.email="",this.loading=!1}firstUpdated(){var t;null===(t=this.formRef.value)||void 0===t||t.addEventListener("keydown",(t=>{"Enter"===t.key&&this.onSubmitEmail(t)}))}render(){return(0,p.qy)(J||(J=(0,d.A)(['\n      <wui-flex flexDirection="column" padding="m" gap="m">\n        <form '," @submit=",">\n          <wui-email-input\n            value=","\n            .disabled=","\n            @inputChange=",'\n          >\n          </wui-email-input>\n          <input type="submit" hidden />\n        </form>\n        ',"\n      </wui-flex>\n    "])),(0,K.K)(this.formRef),this.onSubmitEmail.bind(this),this.initialEmail,this.loading,this.onEmailInputChange.bind(this),this.buttonsTemplate())}onEmailInputChange(t){this.email=t.detail}async onSubmitEmail(t){try{if(this.loading)return;this.loading=!0,t.preventDefault();const e=g.a.getAuthConnector();if(!e)throw new Error("w3m-update-email-wallet: Auth connector not found");const n=await e.provider.updateEmail({email:this.email});o.E.sendEvent({type:"track",event:"EMAIL_EDIT"}),"VERIFY_SECONDARY_OTP"===n.action?w.I.push("UpdateEmailSecondaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView}):w.I.push("UpdateEmailPrimaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView})}catch(e){v.P.showError(e),this.loading=!1}}buttonsTemplate(){const t=!this.loading&&this.email.length>3&&this.email!==this.initialEmail;return this.redirectView?(0,p.qy)(G||(G=(0,d.A)(['\n      <wui-flex gap="s">\n        <wui-button size="md" variant="neutral" fullWidth @click=','>\n          Cancel\n        </wui-button>\n\n        <wui-button\n          size="md"\n          variant="main"\n          fullWidth\n          @click=',"\n          .disabled=","\n          .loading=","\n        >\n          Save\n        </wui-button>\n      </wui-flex>\n    "])),w.I.goBack,this.onSubmitEmail.bind(this),!t,this.loading):(0,p.qy)(Q||(Q=(0,d.A)(['\n        <wui-button\n          size="md"\n          variant="main"\n          fullWidth\n          @click=',"\n          .disabled=","\n          .loading=","\n        >\n          Save\n        </wui-button>\n      "])),this.onSubmitEmail.bind(this),!t,this.loading)}};$.styles=Y,X([(0,h.wk)()],$.prototype,"email",void 0),X([(0,h.wk)()],$.prototype,"loading",void 0),$=X([(0,u.EM)("w3m-update-email-wallet-view")],$);var tt=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let et=class extends L{constructor(){var t;super(),this.email=null===(t=w.I.state.data)||void 0===t?void 0:t.email,this.onOtpSubmit=async t=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailPrimaryOtp({otp:t}),o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),w.I.replace("UpdateEmailSecondaryOtp",w.I.state.data))}catch(e){throw o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:c.w.parseError(e)}}),e}},this.onStartOver=()=>{w.I.replace("UpdateEmailWallet",w.I.state.data)}}};et=tt([(0,u.EM)("w3m-update-email-primary-otp-view")],et);var nt=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let it=class extends L{constructor(){var t,e;super(),this.email=null===(t=w.I.state.data)||void 0===t?void 0:t.newEmail,this.redirectView=null===(e=w.I.state.data)||void 0===e?void 0:e.redirectView,this.onOtpSubmit=async t=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailSecondaryOtp({otp:t}),o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),this.redirectView&&w.I.reset(this.redirectView))}catch(e){throw o.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:c.w.parseError(e)}}),e}},this.onStartOver=()=>{w.I.replace("UpdateEmailWallet",w.I.state.data)}}};it=nt([(0,u.EM)("w3m-update-email-secondary-otp-view")],it);var ot,at=n(4865),rt=n(3881),st=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};let lt=class extends p.WF{constructor(){var t;super(),this.authConnector=g.a.getAuthConnector(),this.isEmailEnabled=null===(t=s.H.state.remoteFeatures)||void 0===t?void 0:t.email,this.isAuthEnabled=this.checkIfAuthEnabled(g.a.state.connectors),this.connectors=g.a.state.connectors,g.a.subscribeKey("connectors",(t=>{this.connectors=t,this.isAuthEnabled=this.checkIfAuthEnabled(this.connectors)}))}render(){if(!this.isEmailEnabled)throw new Error("w3m-email-login-view: Email is not enabled");if(!this.isAuthEnabled)throw new Error("w3m-email-login-view: No auth connector provided");return(0,p.qy)(ot||(ot=(0,d.A)(['<wui-flex\n      flexDirection="column"\n      .padding=','\n      gap="l"\n    >\n      <w3m-email-login-widget></w3m-email-login-widget>\n    </wui-flex> '])),["3xs","m","m","m"])}checkIfAuthEnabled(t){const e=t.filter((t=>t.type===rt.o.CONNECTOR_TYPE_AUTH)).map((t=>t.chain));return at.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.some((t=>e.includes(t)))}};st([(0,h.wk)()],lt.prototype,"connectors",void 0),lt=st([(0,u.EM)("w3m-email-login-view")],lt)}}]);
//# sourceMappingURL=6656.e968d3c9.chunk.js.map